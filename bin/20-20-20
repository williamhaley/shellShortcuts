#!/usr/bin/env bash

if [ "$1" = "--kill" ];
then
  kill $(pgrep -f 20-20-20)
  exit 0
fi

(
  while true;
  do
    sleep 1200 # 1200 seconds -> 20 minutes

    echo "20-20-20 - $(date) [is_mac: $IS_MAC] [is_linux: $IS_LINUX]" >> /tmp/20-20-20.log

    if [ "${IS_MAC}" = "true" ];
    then
      osascript -e 'display dialog "Rest your eyes"'
    fi

    if [ "${IS_LINUX}" = "true" ];
    then
      notify-send --expire-time=20000 "Rest your eyes"
    fi
  done
) &

