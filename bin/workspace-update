#!/usr/bin/env bash

for APP in `ls $1`;
	do (
		if [ ! -d "${1}/${APP}" ];
		then
			continue
		fi

		cd "$1/$APP"
		if [ -d ".git" ];
		then
			printf "${APP}: "
			printfgreen "[$(git currentbranch)] "
			git isdirty && printfred "dirty"
			git hasstash && printfyellow "stash"
			printf "\nbranches: $(git branch | wc -l | sed 's/^ *//;s/ *$//')\n"
			git submodule update --init --recursive
			git pull --rebase
			echo ""
		fi
	)
done
